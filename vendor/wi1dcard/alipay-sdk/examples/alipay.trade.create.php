<?php
 use Alipay\AlipayRequestFactory; $aop = require __DIR__ . '/_bootstrap.php'; $apiName = basename(__FILE__, '.php'); if (php_sapi_name() === 'cli') { $callbackUrl = ''; } else { $hostInfo = (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on' ? 'https' : 'http') . '://' . $_SERVER['HTTP_HOST']; $callbackUrl = $hostInfo . dirname($_SERVER['DOCUMENT_URI']) . '/_callback.php'; } $request = AlipayRequestFactory::create($apiName, [ 'notify_url' => $callbackUrl, 'biz_content' => [ 'body' => 'This is a sample body from wi1dcard/alipay-php-sdk', 'subject' => 'This is a sample subject from wi1dcard/alipay-php-sdk', 'out_trade_no' => sha1(microtime() . uniqid()), 'total_amount' => '0.01', 'buyer_id' => '2088702383822474', ], ]); try { $data = $aop->execute($request)->getData(); print_r($data); } catch (\Exception $ex) { http_response_code(500); print_r($ex); } 