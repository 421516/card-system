<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $sp845342) { $spfedf4e = $sp845342->post('user_id'); $sp3f4aca = $sp845342->post('action', \App\Log::ACTION_LOGIN); $sp3eff46 = \App\Log::where('action', $sp3f4aca); if ($spfedf4e && self::isAdmin()) { $sp3eff46->where('user_id', $spfedf4e); } else { $sp3eff46->where('user_id', Auth::id()); } $spb77c39 = $sp845342->post('start_at'); if (strlen($spb77c39)) { $sp3eff46->where('created_at', '>=', $spb77c39 . ' 00:00:00'); } $sp2fbbea = $sp845342->post('end_at'); if (strlen($sp2fbbea)) { $sp3eff46->where('created_at', '<=', $sp2fbbea . ' 23:59:59'); } $sp2d1093 = $sp845342->post('current_page', 1); $spfe0c85 = $sp845342->post('per_page', 20); $spd1b01a = $sp3eff46->orderBy('created_at', 'DESC')->paginate($spfe0c85, array('*'), 'page', $sp2d1093); return Response::success($spd1b01a); } }