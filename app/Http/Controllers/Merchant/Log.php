<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $spdd9f33) { $spc7622d = $spdd9f33->post('user_id'); $sp00caea = $spdd9f33->post('action', \App\Log::ACTION_LOGIN); $sp26c3c2 = \App\Log::where('action', $sp00caea); if ($spc7622d && self::isAdmin()) { $sp26c3c2->where('user_id', $spc7622d); } else { $sp26c3c2->where('user_id', Auth::id()); } $sp6e0855 = $spdd9f33->post('start_at'); if (strlen($sp6e0855)) { $sp26c3c2->where('created_at', '>=', $sp6e0855 . ' 00:00:00'); } $sp4d4028 = $spdd9f33->post('end_at'); if (strlen($sp4d4028)) { $sp26c3c2->where('created_at', '<=', $sp4d4028 . ' 23:59:59'); } $sp6f7226 = $spdd9f33->post('current_page', 1); $spaba533 = $spdd9f33->post('per_page', 20); $spec1114 = $sp26c3c2->orderBy('created_at', 'DESC')->paginate($spaba533, array('*'), 'page', $sp6f7226); return Response::success($spec1114); } }