<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $sp0fc69c) { $sp5670aa = $sp0fc69c->post('user_id'); $sp60e23b = $sp0fc69c->post('action', \App\Log::ACTION_LOGIN); $sp3f78ce = \App\Log::where('action', $sp60e23b); if ($sp5670aa && self::isAdmin()) { $sp3f78ce->where('user_id', $sp5670aa); } else { $sp3f78ce->where('user_id', Auth::id()); } $sp5bc242 = $sp0fc69c->post('start_at'); if (strlen($sp5bc242)) { $sp3f78ce->where('created_at', '>=', $sp5bc242 . ' 00:00:00'); } $spce0aa4 = $sp0fc69c->post('end_at'); if (strlen($spce0aa4)) { $sp3f78ce->where('created_at', '<=', $spce0aa4 . ' 23:59:59'); } $sp73a73e = $sp0fc69c->post('current_page', 1); $spfc5387 = $sp0fc69c->post('per_page', 20); $sp36eb9c = $sp3f78ce->orderBy('created_at', 'DESC')->paginate($spfc5387, array('*'), 'page', $sp73a73e); return Response::success($sp36eb9c); } }