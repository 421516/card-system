<?php
require_once '../lib/WxPay.Api.php'; class NativePay { public function GetPrePayUrl($sp1386ec) { $spd2528d = new WxPayBizPayUrl(); $spd2528d->SetProduct_id($sp1386ec); $sp7c97ea = WxpayApi::bizpayurl($spd2528d); $sp833b34 = 'weixin://wxpay/bizpayurl?' . $this->ToUrlParams($sp7c97ea); return $sp833b34; } private function ToUrlParams($spc3c6c8) { $sp3b03ee = ''; foreach ($spc3c6c8 as $spf169bd => $spb83a69) { $sp3b03ee .= $spf169bd . '=' . $spb83a69 . '&'; } $sp3b03ee = trim($sp3b03ee, '&'); return $sp3b03ee; } public function GetPayUrl($sp106469) { if ($sp106469->GetTrade_type() == 'NATIVE') { $sp836ce6 = WxPayApi::unifiedOrder($sp106469); return $sp836ce6; } } public function GetH5PayUrl($sp106469) { if ($sp106469->GetTrade_type() == 'MWEB') { $sp836ce6 = WxPayApi::unifiedOrder($sp106469); return $sp836ce6; } } }