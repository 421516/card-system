<?php
require_once '../lib/WxPay.Api.php'; class NativePay { public function GetPrePayUrl($spcc22cf) { $sp6b73b2 = new WxPayBizPayUrl(); $sp6b73b2->SetProduct_id($spcc22cf); $sp71c5bc = WxpayApi::bizpayurl($sp6b73b2); $sp11a0e0 = 'weixin://wxpay/bizpayurl?' . $this->ToUrlParams($sp71c5bc); return $sp11a0e0; } private function ToUrlParams($sp1e1fcd) { $sp8942fa = ''; foreach ($sp1e1fcd as $sp614732 => $sp154f6e) { $sp8942fa .= $sp614732 . '=' . $sp154f6e . '&'; } $sp8942fa = trim($sp8942fa, '&'); return $sp8942fa; } public function GetPayUrl($spd2b050) { if ($spd2b050->GetTrade_type() == 'NATIVE') { $sp9610ab = WxPayApi::unifiedOrder($spd2b050); return $sp9610ab; } } public function GetH5PayUrl($spd2b050) { if ($spd2b050->GetTrade_type() == 'MWEB') { $sp9610ab = WxPayApi::unifiedOrder($spd2b050); return $sp9610ab; } } }