<?php
class WxPayNotify extends WxPayNotifyReply { public final function Handle($spb13ace = true) { $spcc4042 = WxpayApi::notify(array($this, 'NotifyCallBack'), $sp3792af); if ($spcc4042 == false) { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($sp3792af); $this->ReplyNotify(false); return; } else { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } $this->ReplyNotify($spb13ace); } public function NotifyProcess($sp38c5ae, &$sp3792af) { return true; } public final function NotifyCallBack($sp38c5ae) { $sp3792af = 'OK'; $spcc4042 = $this->NotifyProcess($sp38c5ae, $sp3792af); if ($spcc4042 == true) { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } else { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($sp3792af); } return $spcc4042; } private final function ReplyNotify($spb13ace = true) { if ($spb13ace == true && $this->GetReturn_code() == 'SUCCESS') { $this->SetSign(); } WxpayApi::replyNotify($this->ToXml()); } }