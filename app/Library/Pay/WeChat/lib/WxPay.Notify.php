<?php
class WxPayNotify extends WxPayNotifyReply { public final function Handle($spb7cf79 = true) { $sp836ce6 = WxpayApi::notify(array($this, 'NotifyCallBack'), $spcb569a); if ($sp836ce6 == false) { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($spcb569a); $this->ReplyNotify(false); return; } else { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } $this->ReplyNotify($spb7cf79); } public function NotifyProcess($sp94131d, &$spcb569a) { return true; } public final function NotifyCallBack($sp94131d) { $spcb569a = 'OK'; $sp836ce6 = $this->NotifyProcess($sp94131d, $spcb569a); if ($sp836ce6 == true) { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } else { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($spcb569a); } return $sp836ce6; } private final function ReplyNotify($spb7cf79 = true) { if ($spb7cf79 == true && $this->GetReturn_code() == 'SUCCESS') { $this->SetSign(); } WxpayApi::replyNotify($this->ToXml()); } }