<?php
class WxPayNotify extends WxPayNotifyReply { public final function Handle($sp3c95d3 = true) { $spc4a98e = WxpayApi::notify(array($this, 'NotifyCallBack'), $sp55c6db); if ($spc4a98e == false) { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($sp55c6db); $this->ReplyNotify(false); return; } else { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } $this->ReplyNotify($sp3c95d3); } public function NotifyProcess($sp151100, &$sp55c6db) { return true; } public final function NotifyCallBack($sp151100) { $sp55c6db = 'OK'; $spc4a98e = $this->NotifyProcess($sp151100, $sp55c6db); if ($spc4a98e == true) { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } else { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($sp55c6db); } return $spc4a98e; } private final function ReplyNotify($sp3c95d3 = true) { if ($sp3c95d3 == true && $this->GetReturn_code() == 'SUCCESS') { $this->SetSign(); } WxpayApi::replyNotify($this->ToXml()); } }