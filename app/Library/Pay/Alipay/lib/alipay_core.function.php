<?php
function createLinkString($sp40c6d7) { $sp8e6d6f = ''; foreach ($sp40c6d7 as $spa8a71b => $sp3172ba) { $sp8e6d6f .= $spa8a71b . '=' . $sp3172ba . '&'; } $sp8e6d6f = substr($sp8e6d6f, 0, strlen($sp8e6d6f) - 1); if (get_magic_quotes_gpc()) { $sp8e6d6f = stripslashes($sp8e6d6f); } return $sp8e6d6f; } function createLinkStringUrlEncode($sp40c6d7) { $sp8e6d6f = ''; foreach ($sp40c6d7 as $spa8a71b => $sp3172ba) { $sp8e6d6f .= $spa8a71b . '=' . urlencode($sp3172ba) . '&'; } $sp8e6d6f = substr($sp8e6d6f, 0, strlen($sp8e6d6f) - 1); if (get_magic_quotes_gpc()) { $sp8e6d6f = stripslashes($sp8e6d6f); } return $sp8e6d6f; } function paraFilter($sp40c6d7) { $spa5ff74 = array(); foreach ($sp40c6d7 as $spa8a71b => $sp3172ba) { if ($spa8a71b == 'sign' || $spa8a71b == 'sign_type' || $sp3172ba == '') { continue; } else { $spa5ff74[$spa8a71b] = $sp40c6d7[$spa8a71b]; } } return $spa5ff74; } function argSort($sp40c6d7) { ksort($sp40c6d7); reset($sp40c6d7); return $sp40c6d7; } function logResult($sp483434 = '') { $spc5e32a = fopen('log.txt', 'a'); flock($spc5e32a, LOCK_EX); fwrite($spc5e32a, '执行日期：' . strftime('%Y%m%d%H%M%S', time()) . '
' . $sp483434 . '
'); flock($spc5e32a, LOCK_UN); fclose($spc5e32a); } function getHttpResponsePOST($sp7a0d0d, $sp1062d7, $sp40c6d7, $spd19382 = '') { if (trim($spd19382) != '') { $sp7a0d0d = $sp7a0d0d . '_input_charset=' . $spd19382; } $sp495c30 = curl_init($sp7a0d0d); curl_setopt($sp495c30, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($sp495c30, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($sp495c30, CURLOPT_CAINFO, $sp1062d7); curl_setopt($sp495c30, CURLOPT_HEADER, 0); curl_setopt($sp495c30, CURLOPT_RETURNTRANSFER, 1); curl_setopt($sp495c30, CURLOPT_POST, true); curl_setopt($sp495c30, CURLOPT_POSTFIELDS, $sp40c6d7); $sp8d23b9 = curl_exec($sp495c30); curl_close($sp495c30); return $sp8d23b9; } function getHttpResponseGET($sp7a0d0d, $sp1c0e12) { $sp495c30 = curl_init($sp7a0d0d); curl_setopt($sp495c30, CURLOPT_HEADER, 0); curl_setopt($sp495c30, CURLOPT_RETURNTRANSFER, 1); curl_setopt($sp495c30, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($sp495c30, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($sp495c30, CURLOPT_CAINFO, $sp1c0e12); $sp8d23b9 = curl_exec($sp495c30); curl_close($sp495c30); return $sp8d23b9; } function charsetEncode($sp11f4cb, $spa40fa5, $sp743d9b) { $sp315fc3 = ''; if (!isset($spa40fa5)) { $spa40fa5 = $sp743d9b; } if ($sp743d9b == $spa40fa5 || $sp11f4cb == null) { $sp315fc3 = $sp11f4cb; } elseif (function_exists('mb_convert_encoding')) { $sp315fc3 = mb_convert_encoding($sp11f4cb, $spa40fa5, $sp743d9b); } elseif (function_exists('iconv')) { $sp315fc3 = iconv($sp743d9b, $spa40fa5, $sp11f4cb); } else { die('sorry, you have no libs support for charset change.'); } return $sp315fc3; } function charsetDecode($sp11f4cb, $sp743d9b, $spa40fa5) { if (!isset($sp743d9b)) { $spa40fa5 = $sp743d9b; } if ($sp743d9b == $spa40fa5 || $sp11f4cb == null) { $sp315fc3 = $sp11f4cb; } elseif (function_exists('mb_convert_encoding')) { $sp315fc3 = mb_convert_encoding($sp11f4cb, $spa40fa5, $sp743d9b); } elseif (function_exists('iconv')) { $sp315fc3 = iconv($sp743d9b, $spa40fa5, $sp11f4cb); } else { die('sorry, you have no libs support for charset changes.'); } return $sp315fc3; }