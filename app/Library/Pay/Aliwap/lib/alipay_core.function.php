<?php
function createLinkString($sp73565c) { $sp7b40bd = ''; foreach ($sp73565c as $sp63ae76 => $sp679ba2) { $sp7b40bd .= $sp63ae76 . '=' . $sp679ba2 . '&'; } $sp7b40bd = substr($sp7b40bd, 0, strlen($sp7b40bd) - 1); if (get_magic_quotes_gpc()) { $sp7b40bd = stripslashes($sp7b40bd); } return $sp7b40bd; } function createLinkStringUrlEncode($sp73565c) { $sp7b40bd = ''; foreach ($sp73565c as $sp63ae76 => $sp679ba2) { $sp7b40bd .= $sp63ae76 . '=' . urlencode($sp679ba2) . '&'; } $sp7b40bd = substr($sp7b40bd, 0, strlen($sp7b40bd) - 1); if (get_magic_quotes_gpc()) { $sp7b40bd = stripslashes($sp7b40bd); } return $sp7b40bd; } function paraFilter($sp73565c) { $sp060a75 = array(); foreach ($sp73565c as $sp63ae76 => $sp679ba2) { if ($sp63ae76 == 'sign' || $sp63ae76 == 'sign_type' || $sp679ba2 == '') { continue; } else { $sp060a75[$sp63ae76] = $sp73565c[$sp63ae76]; } } return $sp060a75; } function argSort($sp73565c) { ksort($sp73565c); reset($sp73565c); return $sp73565c; } function logResult($sp73f9fe = '') { $sp60df40 = fopen('log.txt', 'a'); flock($sp60df40, LOCK_EX); fwrite($sp60df40, '执行日期：' . strftime('%Y%m%d%H%M%S', time()) . '
' . $sp73f9fe . '
'); flock($sp60df40, LOCK_UN); fclose($sp60df40); } function getHttpResponsePOST($sp833b34, $sp25d418, $sp73565c, $sp555b90 = '') { if (trim($sp555b90) != '') { $sp833b34 = $sp833b34 . '_input_charset=' . $sp555b90; } $spaa9b9e = curl_init($sp833b34); curl_setopt($spaa9b9e, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spaa9b9e, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spaa9b9e, CURLOPT_CAINFO, $sp25d418); curl_setopt($spaa9b9e, CURLOPT_HEADER, 0); curl_setopt($spaa9b9e, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spaa9b9e, CURLOPT_POST, true); curl_setopt($spaa9b9e, CURLOPT_POSTFIELDS, $sp73565c); $sp979037 = curl_exec($spaa9b9e); curl_close($spaa9b9e); return $sp979037; } function getHttpResponseGET($sp833b34, $sp25d418) { $spaa9b9e = curl_init($sp833b34); curl_setopt($spaa9b9e, CURLOPT_HEADER, 0); curl_setopt($spaa9b9e, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spaa9b9e, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spaa9b9e, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spaa9b9e, CURLOPT_CAINFO, $sp25d418); $sp979037 = curl_exec($spaa9b9e); curl_close($spaa9b9e); return $sp979037; } function charsetEncode($sp106469, $spc98442, $sp1ec830) { if (!isset($spc98442)) { $spc98442 = $sp1ec830; } if ($sp1ec830 == $spc98442 || $sp106469 == null) { $spea3669 = $sp106469; } elseif (function_exists('mb_convert_encoding')) { $spea3669 = mb_convert_encoding($sp106469, $spc98442, $sp1ec830); } elseif (function_exists('iconv')) { $spea3669 = iconv($sp1ec830, $spc98442, $sp106469); } else { die('sorry, you have no libs support for charset change.'); } return $spea3669; } function charsetDecode($sp106469, $sp1ec830, $spc98442) { if (!isset($sp1ec830)) { $spc98442 = $sp1ec830; } if ($sp1ec830 == $spc98442 || $sp106469 == null) { $spea3669 = $sp106469; } elseif (function_exists('mb_convert_encoding')) { $spea3669 = mb_convert_encoding($sp106469, $spc98442, $sp1ec830); } elseif (function_exists('iconv')) { $spea3669 = iconv($sp1ec830, $spc98442, $sp106469); } else { die('sorry, you have no libs support for charset changes.'); } return $spea3669; }