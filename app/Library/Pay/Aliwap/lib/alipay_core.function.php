<?php
function createLinkString($sp6d9830) { $spea5491 = ''; foreach ($sp6d9830 as $sp9684a3 => $spc28c86) { $spea5491 .= $sp9684a3 . '=' . $spc28c86 . '&'; } $spea5491 = substr($spea5491, 0, strlen($spea5491) - 1); if (get_magic_quotes_gpc()) { $spea5491 = stripslashes($spea5491); } return $spea5491; } function createLinkStringUrlEncode($sp6d9830) { $spea5491 = ''; foreach ($sp6d9830 as $sp9684a3 => $spc28c86) { $spea5491 .= $sp9684a3 . '=' . urlencode($spc28c86) . '&'; } $spea5491 = substr($spea5491, 0, strlen($spea5491) - 1); if (get_magic_quotes_gpc()) { $spea5491 = stripslashes($spea5491); } return $spea5491; } function paraFilter($sp6d9830) { $sp4bb27a = array(); foreach ($sp6d9830 as $sp9684a3 => $spc28c86) { if ($sp9684a3 == 'sign' || $sp9684a3 == 'sign_type' || $spc28c86 == '') { continue; } else { $sp4bb27a[$sp9684a3] = $sp6d9830[$sp9684a3]; } } return $sp4bb27a; } function argSort($sp6d9830) { ksort($sp6d9830); reset($sp6d9830); return $sp6d9830; } function logResult($sp9b7fd6 = '') { $spbf833f = fopen('log.txt', 'a'); flock($spbf833f, LOCK_EX); fwrite($spbf833f, '执行日期：' . strftime('%Y%m%d%H%M%S', time()) . '
' . $sp9b7fd6 . '
'); flock($spbf833f, LOCK_UN); fclose($spbf833f); } function getHttpResponsePOST($spdfc1ea, $sp303ab5, $sp6d9830, $spcea90a = '') { if (trim($spcea90a) != '') { $spdfc1ea = $spdfc1ea . '_input_charset=' . $spcea90a; } $spafdf3f = curl_init($spdfc1ea); curl_setopt($spafdf3f, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spafdf3f, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spafdf3f, CURLOPT_CAINFO, $sp303ab5); curl_setopt($spafdf3f, CURLOPT_HEADER, 0); curl_setopt($spafdf3f, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spafdf3f, CURLOPT_POST, true); curl_setopt($spafdf3f, CURLOPT_POSTFIELDS, $sp6d9830); $sp69a782 = curl_exec($spafdf3f); curl_close($spafdf3f); return $sp69a782; } function getHttpResponseGET($spdfc1ea, $sp303ab5) { $spafdf3f = curl_init($spdfc1ea); curl_setopt($spafdf3f, CURLOPT_HEADER, 0); curl_setopt($spafdf3f, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spafdf3f, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spafdf3f, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spafdf3f, CURLOPT_CAINFO, $sp303ab5); $sp69a782 = curl_exec($spafdf3f); curl_close($spafdf3f); return $sp69a782; } function charsetEncode($sp51043b, $spfc0dbc, $sp124e94) { if (!isset($spfc0dbc)) { $spfc0dbc = $sp124e94; } if ($sp124e94 == $spfc0dbc || $sp51043b == null) { $spfe083a = $sp51043b; } elseif (function_exists('mb_convert_encoding')) { $spfe083a = mb_convert_encoding($sp51043b, $spfc0dbc, $sp124e94); } elseif (function_exists('iconv')) { $spfe083a = iconv($sp124e94, $spfc0dbc, $sp51043b); } else { die('sorry, you have no libs support for charset change.'); } return $spfe083a; } function charsetDecode($sp51043b, $sp124e94, $spfc0dbc) { if (!isset($sp124e94)) { $spfc0dbc = $sp124e94; } if ($sp124e94 == $spfc0dbc || $sp51043b == null) { $spfe083a = $sp51043b; } elseif (function_exists('mb_convert_encoding')) { $spfe083a = mb_convert_encoding($sp51043b, $spfc0dbc, $sp124e94); } elseif (function_exists('iconv')) { $spfe083a = iconv($sp124e94, $spfc0dbc, $sp51043b); } else { die('sorry, you have no libs support for charset changes.'); } return $spfe083a; }