<?php
namespace App\Library\Pay; class Pay { private $driver = null; public function goPay($sp1cc6bf, $spae7e02, $sp873da9, $sp33eb4d, $sp983f6f) { $this->driver = static::getDriver($sp1cc6bf->id, $sp1cc6bf->driver); $sp45b2a0 = json_decode($sp1cc6bf->config, true); $sp45b2a0['payway'] = $sp1cc6bf->way; $this->driver->goPay($sp45b2a0, $spae7e02, $sp873da9, $sp33eb4d, $sp983f6f); return true; } public static function getDriver($sp1bd511, $spcda0d1) { $sp8effab = 'App\\Library\\Pay\\' . ucfirst($spcda0d1) . '\\Api'; if (!class_exists($sp8effab)) { throw new \Exception('支付驱动未找到'); } return new $sp8effab($sp1bd511); } }