<?php
namespace App\Library\Pay; class Pay { private $driver = null; public function goPay($sp3e72e0, $sp2e5c77, $spe4243d, $sp1d246b, $sp90753f) { $this->driver = static::getDriver($sp3e72e0->id, $sp3e72e0->driver); $spd82bcd = json_decode($sp3e72e0->config, true); $spd82bcd['payway'] = $sp3e72e0->way; $this->driver->goPay($spd82bcd, $sp2e5c77, $spe4243d, $sp1d246b, $sp90753f); return true; } public static function getDriver($spb66869, $spa6384d) { $sp475a42 = 'App\\Library\\Pay\\' . ucfirst($spa6384d) . '\\Api'; if (!class_exists($sp475a42)) { throw new \Exception('支付驱动未找到'); } return new $sp475a42($spb66869); } }