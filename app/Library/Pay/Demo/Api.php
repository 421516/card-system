<?php
namespace App\Library\Pay\Demo; use App\Library\Pay\ApiInterface; use Illuminate\Support\Facades\Log; class Api implements ApiInterface { private $url_notify = ''; private $url_return = ''; public function __construct($spf46c5d) { $this->url_notify = SYS_URL_API . '/pay/notify/' . $spf46c5d; $this->url_return = SYS_URL . '/pay/return/' . $spf46c5d; } function goPay($spa9e109, $sp206d07, $sp89af34, $sp92f0c1, $sp28f24f) { sleep(5); header('Location:' . $this->url_return . '/' . $sp206d07); die; } function verify($spa9e109, $spf8927a) { $spf53f48 = isset($spa9e109['isNotify']) && $spa9e109['isNotify']; if ($spf53f48) { } else { $sp64a7d9 = @$spa9e109['out_trade_no']; if (strlen($sp64a7d9) < 5) { throw new \Exception('交易单号未传入'); } $sp3bdfdc = date('YmdHis'); $spf8927a($sp64a7d9, \App\Order::whereOrderNo($sp64a7d9)->first()->paid, $sp3bdfdc); return true; } return true; } }