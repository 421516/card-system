<?php
namespace App\Library\Pay\Youzan\Open; class Http { private static $boundary = ''; public static function get($spdfc1ea, $spb9d69c) { $spdfc1ea = $spdfc1ea . '?' . http_build_query($spb9d69c); return self::http($spdfc1ea, 'GET'); } public static function post($spdfc1ea, $spb9d69c, $sp996c6f = array()) { $spdbbeeb = array(); if (!$sp996c6f) { $speb838e = http_build_query($spb9d69c); } else { $speb838e = self::buildHttpQueryMulti($spb9d69c, $sp996c6f); $spdbbeeb[] = 'Content-Type: multipart/form-data; boundary=' . self::$boundary; } return self::http($spdfc1ea, 'POST', $speb838e, $spdbbeeb); } private static function http($spdfc1ea, $sp4a290e, $sp087a72 = NULL, $spdbbeeb = array()) { $spfd161c = curl_init(); curl_setopt($spfd161c, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0); curl_setopt($spfd161c, CURLOPT_USERAGENT, 'X-YZ-Client 2.0.0 - PHP'); curl_setopt($spfd161c, CURLOPT_CONNECTTIMEOUT, 30); curl_setopt($spfd161c, CURLOPT_TIMEOUT, 30); curl_setopt($spfd161c, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt($spfd161c, CURLOPT_ENCODING, ''); curl_setopt($spfd161c, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($spfd161c, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spfd161c, CURLOPT_HEADER, FALSE); switch ($sp4a290e) { case 'POST': curl_setopt($spfd161c, CURLOPT_POST, TRUE); if (!empty($sp087a72)) { curl_setopt($spfd161c, CURLOPT_POSTFIELDS, $sp087a72); } break; } curl_setopt($spfd161c, CURLOPT_URL, $spdfc1ea); curl_setopt($spfd161c, CURLOPT_HTTPHEADER, $spdbbeeb); curl_setopt($spfd161c, CURLINFO_HEADER_OUT, TRUE); $sp5241d0 = curl_exec($spfd161c); $sp832ee7 = curl_getinfo($spfd161c, CURLINFO_HTTP_CODE); $sp9357df = curl_getinfo($spfd161c); curl_close($spfd161c); return $sp5241d0; } private static function buildHttpQueryMulti($spb9d69c, $sp996c6f) { if (!$spb9d69c) { return ''; } $spe95c4a = array(); self::$boundary = $sp60c9e5 = uniqid('------------------'); $spbb5729 = '--' . $sp60c9e5; $sp785159 = $spbb5729 . '--'; $spdebc80 = ''; foreach ($spb9d69c as $sp9684a3 => $spb66e06) { $spdebc80 .= $spbb5729 . '
'; $spdebc80 .= 'content-disposition: form-data; name="' . $sp9684a3 . '"

'; $spdebc80 .= $spb66e06 . '
'; } foreach ($sp996c6f as $sp9684a3 => $spb66e06) { if (!$spb66e06) { continue; } if (is_array($spb66e06)) { $spdfc1ea = $spb66e06['url']; if (isset($spb66e06['name'])) { $sp7dcebb = $spb66e06['name']; } else { $spcad52d = explode('?', basename($spb66e06['url'])); $sp7dcebb = $spcad52d[0]; } $sp6e7039 = isset($spb66e06['field']) ? $spb66e06['field'] : $sp9684a3; } else { $spdfc1ea = $spb66e06; $spcad52d = explode('?', basename($spdfc1ea)); $sp7dcebb = $spcad52d[0]; $sp6e7039 = $sp9684a3; } $spf0a6e9 = file_get_contents($spdfc1ea); $spdebc80 .= $spbb5729 . '
'; $spdebc80 .= 'Content-Disposition: form-data; name="' . $sp6e7039 . '"; filename="' . $sp7dcebb . '"' . '
'; $spdebc80 .= 'Content-Type: image/unknown

'; $spdebc80 .= $spf0a6e9 . '
'; } $spdebc80 .= $sp785159; return $spdebc80; } }