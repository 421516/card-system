<?php
namespace App\Library\Pay\Youzan\Open; class Http { private static $boundary = ''; public static function get($sp833b34, $sp31ee10) { $sp833b34 = $sp833b34 . '?' . http_build_query($sp31ee10); return self::http($sp833b34, 'GET'); } public static function post($sp833b34, $sp31ee10, $sp03b3ca = array()) { $sp955824 = array(); if (!$sp03b3ca) { $sp1d246b = http_build_query($sp31ee10); } else { $sp1d246b = self::buildHttpQueryMulti($sp31ee10, $sp03b3ca); $sp955824[] = 'Content-Type: multipart/form-data; boundary=' . self::$boundary; } return self::http($sp833b34, 'POST', $sp1d246b, $sp955824); } private static function http($sp833b34, $spc24a77, $spf18ba7 = NULL, $sp955824 = array()) { $sp9f47af = curl_init(); curl_setopt($sp9f47af, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0); curl_setopt($sp9f47af, CURLOPT_USERAGENT, 'X-YZ-Client 2.0.0 - PHP'); curl_setopt($sp9f47af, CURLOPT_CONNECTTIMEOUT, 30); curl_setopt($sp9f47af, CURLOPT_TIMEOUT, 30); curl_setopt($sp9f47af, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt($sp9f47af, CURLOPT_ENCODING, ''); curl_setopt($sp9f47af, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($sp9f47af, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($sp9f47af, CURLOPT_HEADER, FALSE); switch ($spc24a77) { case 'POST': curl_setopt($sp9f47af, CURLOPT_POST, TRUE); if (!empty($spf18ba7)) { curl_setopt($sp9f47af, CURLOPT_POSTFIELDS, $spf18ba7); } break; } curl_setopt($sp9f47af, CURLOPT_URL, $sp833b34); curl_setopt($sp9f47af, CURLOPT_HTTPHEADER, $sp955824); curl_setopt($sp9f47af, CURLINFO_HEADER_OUT, TRUE); $spfd13d8 = curl_exec($sp9f47af); $spb2d9a6 = curl_getinfo($sp9f47af, CURLINFO_HTTP_CODE); $sp211422 = curl_getinfo($sp9f47af); curl_close($sp9f47af); return $spfd13d8; } private static function buildHttpQueryMulti($sp31ee10, $sp03b3ca) { if (!$sp31ee10) { return ''; } $sp8b8b60 = array(); self::$boundary = $sp0cd681 = uniqid('------------------'); $spcc9113 = '--' . $sp0cd681; $sp9cfa05 = $spcc9113 . '--'; $spaf7106 = ''; foreach ($sp31ee10 as $sp63ae76 => $sp308e09) { $spaf7106 .= $spcc9113 . '
'; $spaf7106 .= 'content-disposition: form-data; name="' . $sp63ae76 . '"

'; $spaf7106 .= $sp308e09 . '
'; } foreach ($sp03b3ca as $sp63ae76 => $sp308e09) { if (!$sp308e09) { continue; } if (is_array($sp308e09)) { $sp833b34 = $sp308e09['url']; if (isset($sp308e09['name'])) { $specd56e = $sp308e09['name']; } else { $sp59aa6d = explode('?', basename($sp308e09['url'])); $specd56e = $sp59aa6d[0]; } $spffbfdc = isset($sp308e09['field']) ? $sp308e09['field'] : $sp63ae76; } else { $sp833b34 = $sp308e09; $sp59aa6d = explode('?', basename($sp833b34)); $specd56e = $sp59aa6d[0]; $spffbfdc = $sp63ae76; } $sp9811e7 = file_get_contents($sp833b34); $spaf7106 .= $spcc9113 . '
'; $spaf7106 .= 'Content-Disposition: form-data; name="' . $spffbfdc . '"; filename="' . $specd56e . '"' . '
'; $spaf7106 .= 'Content-Type: image/unknown

'; $spaf7106 .= $sp9811e7 . '
'; } $spaf7106 .= $sp9cfa05; return $spaf7106; } }