<?php
namespace App\Library\Pay\Youzan\Open; class Http { private static $boundary = ''; public static function get($sp78f833, $sp50fc45) { $sp78f833 = $sp78f833 . '?' . http_build_query($sp50fc45); return self::http($sp78f833, 'GET'); } public static function post($sp78f833, $sp50fc45, $sp2e7205 = array()) { $sp8298e9 = array(); if (!$sp2e7205) { $sp5b5e88 = http_build_query($sp50fc45); } else { $sp5b5e88 = self::buildHttpQueryMulti($sp50fc45, $sp2e7205); $sp8298e9[] = 'Content-Type: multipart/form-data; boundary=' . self::$boundary; } return self::http($sp78f833, 'POST', $sp5b5e88, $sp8298e9); } private static function http($sp78f833, $spf9cb1e, $sp1d1057 = NULL, $sp8298e9 = array()) { $sp38de04 = curl_init(); curl_setopt($sp38de04, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0); curl_setopt($sp38de04, CURLOPT_USERAGENT, 'X-YZ-Client 2.0.0 - PHP'); curl_setopt($sp38de04, CURLOPT_CONNECTTIMEOUT, 30); curl_setopt($sp38de04, CURLOPT_TIMEOUT, 30); curl_setopt($sp38de04, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt($sp38de04, CURLOPT_ENCODING, ''); curl_setopt($sp38de04, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($sp38de04, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($sp38de04, CURLOPT_HEADER, FALSE); switch ($spf9cb1e) { case 'POST': curl_setopt($sp38de04, CURLOPT_POST, TRUE); if (!empty($sp1d1057)) { curl_setopt($sp38de04, CURLOPT_POSTFIELDS, $sp1d1057); } break; } curl_setopt($sp38de04, CURLOPT_URL, $sp78f833); curl_setopt($sp38de04, CURLOPT_HTTPHEADER, $sp8298e9); curl_setopt($sp38de04, CURLINFO_HEADER_OUT, TRUE); $sp1de750 = curl_exec($sp38de04); $spa28cbd = curl_getinfo($sp38de04, CURLINFO_HTTP_CODE); $spe19423 = curl_getinfo($sp38de04); curl_close($sp38de04); return $sp1de750; } private static function buildHttpQueryMulti($sp50fc45, $sp2e7205) { if (!$sp50fc45) { return ''; } $sp31d7c1 = array(); self::$boundary = $sp734ba1 = uniqid('------------------'); $sp43ad0d = '--' . $sp734ba1; $spa62e43 = $sp43ad0d . '--'; $sp6acd48 = ''; foreach ($sp50fc45 as $spfcd1b0 => $spd0bf21) { $sp6acd48 .= $sp43ad0d . '
'; $sp6acd48 .= 'content-disposition: form-data; name="' . $spfcd1b0 . '"

'; $sp6acd48 .= $spd0bf21 . '
'; } foreach ($sp2e7205 as $spfcd1b0 => $spd0bf21) { if (!$spd0bf21) { continue; } if (is_array($spd0bf21)) { $sp78f833 = $spd0bf21['url']; if (isset($spd0bf21['name'])) { $spefa4a1 = $spd0bf21['name']; } else { $sp3e5753 = explode('?', basename($spd0bf21['url'])); $spefa4a1 = $sp3e5753[0]; } $sp3e103d = isset($spd0bf21['field']) ? $spd0bf21['field'] : $spfcd1b0; } else { $sp78f833 = $spd0bf21; $sp3e5753 = explode('?', basename($sp78f833)); $spefa4a1 = $sp3e5753[0]; $sp3e103d = $spfcd1b0; } $sp05263d = file_get_contents($sp78f833); $sp6acd48 .= $sp43ad0d . '
'; $sp6acd48 .= 'Content-Disposition: form-data; name="' . $sp3e103d . '"; filename="' . $spefa4a1 . '"' . '
'; $sp6acd48 .= 'Content-Type: image/unknown

'; $sp6acd48 .= $sp05263d . '
'; } $sp6acd48 .= $spa62e43; return $sp6acd48; } }