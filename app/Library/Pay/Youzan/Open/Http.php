<?php
namespace App\Library\Pay\Youzan\Open; class Http { private static $boundary = ''; public static function get($sp11a0e0, $sp20678b) { $sp11a0e0 = $sp11a0e0 . '?' . http_build_query($sp20678b); return self::http($sp11a0e0, 'GET'); } public static function post($sp11a0e0, $sp20678b, $sp97b131 = array()) { $sp77ba0d = array(); if (!$sp97b131) { $sp92f0c1 = http_build_query($sp20678b); } else { $sp92f0c1 = self::buildHttpQueryMulti($sp20678b, $sp97b131); $sp77ba0d[] = 'Content-Type: multipart/form-data; boundary=' . self::$boundary; } return self::http($sp11a0e0, 'POST', $sp92f0c1, $sp77ba0d); } private static function http($sp11a0e0, $sp090f2c, $sp2cb144 = NULL, $sp77ba0d = array()) { $spdfeed9 = curl_init(); curl_setopt($spdfeed9, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0); curl_setopt($spdfeed9, CURLOPT_USERAGENT, 'X-YZ-Client 2.0.0 - PHP'); curl_setopt($spdfeed9, CURLOPT_CONNECTTIMEOUT, 30); curl_setopt($spdfeed9, CURLOPT_TIMEOUT, 30); curl_setopt($spdfeed9, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt($spdfeed9, CURLOPT_ENCODING, ''); curl_setopt($spdfeed9, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($spdfeed9, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spdfeed9, CURLOPT_HEADER, FALSE); switch ($sp090f2c) { case 'POST': curl_setopt($spdfeed9, CURLOPT_POST, TRUE); if (!empty($sp2cb144)) { curl_setopt($spdfeed9, CURLOPT_POSTFIELDS, $sp2cb144); } break; } curl_setopt($spdfeed9, CURLOPT_URL, $sp11a0e0); curl_setopt($spdfeed9, CURLOPT_HTTPHEADER, $sp77ba0d); curl_setopt($spdfeed9, CURLINFO_HEADER_OUT, TRUE); $sp0e2174 = curl_exec($spdfeed9); $sp5db918 = curl_getinfo($spdfeed9, CURLINFO_HTTP_CODE); $spa0f194 = curl_getinfo($spdfeed9); curl_close($spdfeed9); return $sp0e2174; } private static function buildHttpQueryMulti($sp20678b, $sp97b131) { if (!$sp20678b) { return ''; } $sp384eef = array(); self::$boundary = $sp9f418c = uniqid('------------------'); $sp8a3ffb = '--' . $sp9f418c; $sp99e37e = $sp8a3ffb . '--'; $spab3872 = ''; foreach ($sp20678b as $spf74fd0 => $sp67821d) { $spab3872 .= $sp8a3ffb . '
'; $spab3872 .= 'content-disposition: form-data; name="' . $spf74fd0 . '"

'; $spab3872 .= $sp67821d . '
'; } foreach ($sp97b131 as $spf74fd0 => $sp67821d) { if (!$sp67821d) { continue; } if (is_array($sp67821d)) { $sp11a0e0 = $sp67821d['url']; if (isset($sp67821d['name'])) { $spc5d1c1 = $sp67821d['name']; } else { $spaea097 = explode('?', basename($sp67821d['url'])); $spc5d1c1 = $spaea097[0]; } $spbe303c = isset($sp67821d['field']) ? $sp67821d['field'] : $spf74fd0; } else { $sp11a0e0 = $sp67821d; $spaea097 = explode('?', basename($sp11a0e0)); $spc5d1c1 = $spaea097[0]; $spbe303c = $spf74fd0; } $spd64208 = file_get_contents($sp11a0e0); $spab3872 .= $sp8a3ffb . '
'; $spab3872 .= 'Content-Disposition: form-data; name="' . $spbe303c . '"; filename="' . $spc5d1c1 . '"' . '
'; $spab3872 .= 'Content-Type: image/unknown

'; $spab3872 .= $spd64208 . '
'; } $spab3872 .= $sp99e37e; return $spab3872; } }