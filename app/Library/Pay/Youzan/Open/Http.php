<?php
namespace App\Library\Pay\Youzan\Open; class Http { private static $boundary = ''; public static function get($sp7a0d0d, $spf44b7f) { $sp7a0d0d = $sp7a0d0d . '?' . http_build_query($spf44b7f); return self::http($sp7a0d0d, 'GET'); } public static function post($sp7a0d0d, $spf44b7f, $spb1ed5c = array()) { $sp21afdb = array(); if (!$spb1ed5c) { $sp33eb4d = http_build_query($spf44b7f); } else { $sp33eb4d = self::buildHttpQueryMulti($spf44b7f, $spb1ed5c); $sp21afdb[] = 'Content-Type: multipart/form-data; boundary=' . self::$boundary; } return self::http($sp7a0d0d, 'POST', $sp33eb4d, $sp21afdb); } private static function http($sp7a0d0d, $sp1ebc2f, $spb95549 = NULL, $sp21afdb = array()) { $sp24e3fe = curl_init(); curl_setopt($sp24e3fe, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0); curl_setopt($sp24e3fe, CURLOPT_USERAGENT, 'X-YZ-Client 2.0.0 - PHP'); curl_setopt($sp24e3fe, CURLOPT_CONNECTTIMEOUT, 30); curl_setopt($sp24e3fe, CURLOPT_TIMEOUT, 30); curl_setopt($sp24e3fe, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt($sp24e3fe, CURLOPT_ENCODING, ''); curl_setopt($sp24e3fe, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($sp24e3fe, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($sp24e3fe, CURLOPT_HEADER, FALSE); switch ($sp1ebc2f) { case 'POST': curl_setopt($sp24e3fe, CURLOPT_POST, TRUE); if (!empty($spb95549)) { curl_setopt($sp24e3fe, CURLOPT_POSTFIELDS, $spb95549); } break; } curl_setopt($sp24e3fe, CURLOPT_URL, $sp7a0d0d); curl_setopt($sp24e3fe, CURLOPT_HTTPHEADER, $sp21afdb); curl_setopt($sp24e3fe, CURLINFO_HEADER_OUT, TRUE); $sp73b7ae = curl_exec($sp24e3fe); $speb84ec = curl_getinfo($sp24e3fe, CURLINFO_HTTP_CODE); $sp4f9479 = curl_getinfo($sp24e3fe); curl_close($sp24e3fe); return $sp73b7ae; } private static function buildHttpQueryMulti($spf44b7f, $spb1ed5c) { if (!$spf44b7f) { return ''; } $spfb32af = array(); self::$boundary = $sp5a1934 = uniqid('------------------'); $spc2e187 = '--' . $sp5a1934; $spaf1600 = $spc2e187 . '--'; $spa66314 = ''; foreach ($spf44b7f as $spa8a71b => $spffe9f9) { $spa66314 .= $spc2e187 . '
'; $spa66314 .= 'content-disposition: form-data; name="' . $spa8a71b . '"

'; $spa66314 .= $spffe9f9 . '
'; } foreach ($spb1ed5c as $spa8a71b => $spffe9f9) { if (!$spffe9f9) { continue; } if (is_array($spffe9f9)) { $sp7a0d0d = $spffe9f9['url']; if (isset($spffe9f9['name'])) { $sp3aae7a = $spffe9f9['name']; } else { $sp0931d2 = explode('?', basename($spffe9f9['url'])); $sp3aae7a = $sp0931d2[0]; } $spe13e26 = isset($spffe9f9['field']) ? $spffe9f9['field'] : $spa8a71b; } else { $sp7a0d0d = $spffe9f9; $sp0931d2 = explode('?', basename($sp7a0d0d)); $sp3aae7a = $sp0931d2[0]; $spe13e26 = $spa8a71b; } $spdf4cae = file_get_contents($sp7a0d0d); $spa66314 .= $spc2e187 . '
'; $spa66314 .= 'Content-Disposition: form-data; name="' . $spe13e26 . '"; filename="' . $sp3aae7a . '"' . '
'; $spa66314 .= 'Content-Type: image/unknown

'; $spa66314 .= $spdf4cae . '
'; } $spa66314 .= $spaf1600; return $spa66314; } }