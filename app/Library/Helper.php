<?php
namespace App\Library; class Helper { public static function getMysqlDate($spa22c24 = 0) { return date('Y-m-d', time() + $spa22c24 * 24 * 3600); } public static function getIP() { if (isset($_SERVER)) { if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) { $spb2dd49 = $_SERVER['HTTP_X_FORWARDED_FOR']; } else { if (isset($_SERVER['HTTP_CLIENT_IP'])) { $spb2dd49 = $_SERVER['HTTP_CLIENT_IP']; } else { $spb2dd49 = @$_SERVER['REMOTE_ADDR']; } } } else { if (getenv('HTTP_X_FORWARDED_FOR')) { $spb2dd49 = getenv('HTTP_X_FORWARDED_FOR'); } else { if (getenv('HTTP_CLIENT_IP')) { $spb2dd49 = getenv('HTTP_CLIENT_IP'); } else { $spb2dd49 = getenv('REMOTE_ADDR'); } } } if (strpos($spb2dd49, ',') !== FALSE) { $spc92780 = explode(',', $spb2dd49); return $spc92780[0]; } return $spb2dd49; } public static function getClientIP() { if (isset($_SERVER)) { $spb2dd49 = $_SERVER['REMOTE_ADDR']; } else { $spb2dd49 = getenv('REMOTE_ADDR'); } if (strpos($spb2dd49, ',') !== FALSE) { $spc92780 = explode(',', $spb2dd49); return $spc92780[0]; } return $spb2dd49; } public static function filterWords($spf6683b, $sp1bc521) { if (!$spf6683b) { return false; } if (!is_array($sp1bc521)) { $sp1bc521 = explode('|', $sp1bc521); } foreach ($sp1bc521 as $sp73f9fe) { if ($sp73f9fe && strpos($spf6683b, $sp73f9fe) !== FALSE) { return $sp73f9fe; } } return false; } public static function is_idcard($spc472c0) { if (strlen($spc472c0) == 18) { return self::idcard_checksum18($spc472c0); } elseif (strlen($spc472c0) == 15) { $spc472c0 = self::idcard_15to18($spc472c0); return self::idcard_checksum18($spc472c0); } else { return false; } } private static function idcard_verify_number($spdb82cb) { if (strlen($spdb82cb) != 17) { return false; } $sp686834 = array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); $sp0a77b5 = array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'); $sp067f1e = 0; for ($spcecaa9 = 0; $spcecaa9 < strlen($spdb82cb); $spcecaa9++) { $sp067f1e += substr($spdb82cb, $spcecaa9, 1) * $sp686834[$spcecaa9]; } $sp52a707 = $sp067f1e % 11; $spdaee7a = $sp0a77b5[$sp52a707]; return $spdaee7a; } private static function idcard_15to18($sp056e09) { if (strlen($sp056e09) != 15) { return false; } else { if (array_search(substr($sp056e09, 12, 3), array('996', '997', '998', '999')) !== false) { $sp056e09 = substr($sp056e09, 0, 6) . '18' . substr($sp056e09, 6, 9); } else { $sp056e09 = substr($sp056e09, 0, 6) . '19' . substr($sp056e09, 6, 9); } } $sp056e09 = $sp056e09 . self::idcard_verify_number($sp056e09); return $sp056e09; } private static function idcard_checksum18($sp056e09) { if (strlen($sp056e09) != 18) { return false; } $spdb82cb = substr($sp056e09, 0, 17); if (self::idcard_verify_number($spdb82cb) != strtoupper(substr($sp056e09, 17, 1))) { return false; } else { return true; } } public static function strBetween($spf6683b, $sp51eb65, $sp5e6650) { $sp62a6f7 = stripos($spf6683b, $sp51eb65); if ($sp62a6f7 === false) { return ''; } $sp3b1dd9 = stripos($spf6683b, $sp5e6650, $sp62a6f7 + strlen($sp51eb65)); if ($sp3b1dd9 === false || $sp62a6f7 >= $sp3b1dd9) { return ''; } $sp0761bc = strlen($sp51eb65); $sp46dd86 = substr($spf6683b, $sp62a6f7 + $sp0761bc, $sp3b1dd9 - $sp62a6f7 - $sp0761bc); return $sp46dd86; } public static function formatUrl($sp833b34) { if (!starts_with($sp833b34, 'http://') && !starts_with($sp833b34, 'https://')) { $sp833b34 = 'http://' . $sp833b34; } while (ends_with($sp833b34, '/')) { $sp833b34 = substr($sp833b34, 0, -1); } return $sp833b34; } }