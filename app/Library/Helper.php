<?php
namespace App\Library; class Helper { public static function getMysqlDate($spe8fbcf = 0) { return date('Y-m-d', time() + $spe8fbcf * 24 * 3600); } public static function getIP() { if (isset($_SERVER)) { if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) { $sp7ff87e = $_SERVER['HTTP_X_FORWARDED_FOR']; } else { if (isset($_SERVER['HTTP_CLIENT_IP'])) { $sp7ff87e = $_SERVER['HTTP_CLIENT_IP']; } else { $sp7ff87e = @$_SERVER['REMOTE_ADDR']; } } } else { if (getenv('HTTP_X_FORWARDED_FOR')) { $sp7ff87e = getenv('HTTP_X_FORWARDED_FOR'); } else { if (getenv('HTTP_CLIENT_IP')) { $sp7ff87e = getenv('HTTP_CLIENT_IP'); } else { $sp7ff87e = getenv('REMOTE_ADDR'); } } } if (strpos($sp7ff87e, ',') !== FALSE) { $spbdec34 = explode(',', $sp7ff87e); return $spbdec34[0]; } return $sp7ff87e; } public static function getClientIP() { if (isset($_SERVER)) { $sp7ff87e = $_SERVER['REMOTE_ADDR']; } else { $sp7ff87e = getenv('REMOTE_ADDR'); } if (strpos($sp7ff87e, ',') !== FALSE) { $spbdec34 = explode(',', $sp7ff87e); return $spbdec34[0]; } return $sp7ff87e; } public static function filterWords($spdeb044, $spcc0fad) { if (!$spdeb044) { return false; } if (!is_array($spcc0fad)) { $spcc0fad = explode('|', $spcc0fad); } foreach ($spcc0fad as $sp415128) { if ($sp415128 && strpos($spdeb044, $sp415128) !== FALSE) { return $sp415128; } } return false; } public static function is_idcard($spffd0b2) { if (strlen($spffd0b2) == 18) { return self::idcard_checksum18($spffd0b2); } elseif (strlen($spffd0b2) == 15) { $spffd0b2 = self::idcard_15to18($spffd0b2); return self::idcard_checksum18($spffd0b2); } else { return false; } } private static function idcard_verify_number($spb8b6fe) { if (strlen($spb8b6fe) != 17) { return false; } $spc460f6 = array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); $sp6730f5 = array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'); $sp736b5f = 0; for ($spfae064 = 0; $spfae064 < strlen($spb8b6fe); $spfae064++) { $sp736b5f += substr($spb8b6fe, $spfae064, 1) * $spc460f6[$spfae064]; } $sp2c6060 = $sp736b5f % 11; $spad01f1 = $sp6730f5[$sp2c6060]; return $spad01f1; } private static function idcard_15to18($spa83242) { if (strlen($spa83242) != 15) { return false; } else { if (array_search(substr($spa83242, 12, 3), array('996', '997', '998', '999')) !== false) { $spa83242 = substr($spa83242, 0, 6) . '18' . substr($spa83242, 6, 9); } else { $spa83242 = substr($spa83242, 0, 6) . '19' . substr($spa83242, 6, 9); } } $spa83242 = $spa83242 . self::idcard_verify_number($spa83242); return $spa83242; } private static function idcard_checksum18($spa83242) { if (strlen($spa83242) != 18) { return false; } $spb8b6fe = substr($spa83242, 0, 17); if (self::idcard_verify_number($spb8b6fe) != strtoupper(substr($spa83242, 17, 1))) { return false; } else { return true; } } public static function strBetween($spdeb044, $spbadcf1, $spdd5024) { $sp724aec = stripos($spdeb044, $spbadcf1); if ($sp724aec === false) { return ''; } $sp70d2cb = stripos($spdeb044, $spdd5024, $sp724aec + strlen($spbadcf1)); if ($sp70d2cb === false || $sp724aec >= $sp70d2cb) { return ''; } $spf7e730 = strlen($spbadcf1); $sp123706 = substr($spdeb044, $sp724aec + $spf7e730, $sp70d2cb - $sp724aec - $spf7e730); return $sp123706; } public static function formatUrl($sp78f833) { if (!starts_with($sp78f833, 'http://') && !starts_with($sp78f833, 'https://')) { $sp78f833 = 'http://' . $sp78f833; } while (ends_with($sp78f833, '/')) { $sp78f833 = substr($sp78f833, 0, -1); } return $sp78f833; } }