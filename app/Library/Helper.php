<?php
namespace App\Library; class Helper { public static function getMysqlDate($spcfa67a = 0) { return date('Y-m-d', time() + $spcfa67a * 24 * 3600); } public static function getIP() { if (isset($_SERVER)) { if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) { $sp720902 = $_SERVER['HTTP_X_FORWARDED_FOR']; } else { if (isset($_SERVER['HTTP_CLIENT_IP'])) { $sp720902 = $_SERVER['HTTP_CLIENT_IP']; } else { $sp720902 = @$_SERVER['REMOTE_ADDR']; } } } else { if (getenv('HTTP_X_FORWARDED_FOR')) { $sp720902 = getenv('HTTP_X_FORWARDED_FOR'); } else { if (getenv('HTTP_CLIENT_IP')) { $sp720902 = getenv('HTTP_CLIENT_IP'); } else { $sp720902 = getenv('REMOTE_ADDR'); } } } if (strpos($sp720902, ',') !== FALSE) { $spbce9f2 = explode(',', $sp720902); return $spbce9f2[0]; } return $sp720902; } public static function getClientIP() { if (isset($_SERVER)) { $sp720902 = $_SERVER['REMOTE_ADDR']; } else { $sp720902 = getenv('REMOTE_ADDR'); } if (strpos($sp720902, ',') !== FALSE) { $spbce9f2 = explode(',', $sp720902); return $spbce9f2[0]; } return $sp720902; } public static function filterWords($spb67857, $sp4778c1) { if (!$spb67857) { return false; } if (!is_array($sp4778c1)) { $sp4778c1 = explode('|', $sp4778c1); } foreach ($sp4778c1 as $sp9b7fd6) { if ($sp9b7fd6 && strpos($spb67857, $sp9b7fd6) !== FALSE) { return $sp9b7fd6; } } return false; } public static function is_idcard($sp9ee861) { if (strlen($sp9ee861) == 18) { return self::idcard_checksum18($sp9ee861); } elseif (strlen($sp9ee861) == 15) { $sp9ee861 = self::idcard_15to18($sp9ee861); return self::idcard_checksum18($sp9ee861); } else { return false; } } private static function idcard_verify_number($sp66d441) { if (strlen($sp66d441) != 17) { return false; } $sp294310 = array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); $sp0523ac = array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'); $sp4df4c2 = 0; for ($sp1b7341 = 0; $sp1b7341 < strlen($sp66d441); $sp1b7341++) { $sp4df4c2 += substr($sp66d441, $sp1b7341, 1) * $sp294310[$sp1b7341]; } $sp10dd24 = $sp4df4c2 % 11; $sp21cb89 = $sp0523ac[$sp10dd24]; return $sp21cb89; } private static function idcard_15to18($sp866fa3) { if (strlen($sp866fa3) != 15) { return false; } else { if (array_search(substr($sp866fa3, 12, 3), array('996', '997', '998', '999')) !== false) { $sp866fa3 = substr($sp866fa3, 0, 6) . '18' . substr($sp866fa3, 6, 9); } else { $sp866fa3 = substr($sp866fa3, 0, 6) . '19' . substr($sp866fa3, 6, 9); } } $sp866fa3 = $sp866fa3 . self::idcard_verify_number($sp866fa3); return $sp866fa3; } private static function idcard_checksum18($sp866fa3) { if (strlen($sp866fa3) != 18) { return false; } $sp66d441 = substr($sp866fa3, 0, 17); if (self::idcard_verify_number($sp66d441) != strtoupper(substr($sp866fa3, 17, 1))) { return false; } else { return true; } } public static function strBetween($spb67857, $sp47b40f, $spe6a1c0) { $sp110fb8 = stripos($spb67857, $sp47b40f); if ($sp110fb8 === false) { return ''; } $sp18418b = stripos($spb67857, $spe6a1c0, $sp110fb8 + strlen($sp47b40f)); if ($sp18418b === false || $sp110fb8 >= $sp18418b) { return ''; } $spabcd03 = strlen($sp47b40f); $spc8aebe = substr($spb67857, $sp110fb8 + $spabcd03, $sp18418b - $sp110fb8 - $spabcd03); return $spc8aebe; } public static function formatUrl($spdfc1ea) { if (!starts_with($spdfc1ea, 'http://') && !starts_with($spdfc1ea, 'https://')) { $spdfc1ea = 'http://' . $spdfc1ea; } while (ends_with($spdfc1ea, '/')) { $spdfc1ea = substr($spdfc1ea, 0, -1); } return $spdfc1ea; } }