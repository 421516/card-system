<?php
namespace App\Library; class Helper { public static function getMysqlDate($sp6c088a = 0) { return date('Y-m-d', time() + $sp6c088a * 24 * 3600); } public static function getIP() { if (isset($_SERVER)) { if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) { $sp00e332 = $_SERVER['HTTP_X_FORWARDED_FOR']; } else { if (isset($_SERVER['HTTP_CLIENT_IP'])) { $sp00e332 = $_SERVER['HTTP_CLIENT_IP']; } else { $sp00e332 = @$_SERVER['REMOTE_ADDR']; } } } else { if (getenv('HTTP_X_FORWARDED_FOR')) { $sp00e332 = getenv('HTTP_X_FORWARDED_FOR'); } else { if (getenv('HTTP_CLIENT_IP')) { $sp00e332 = getenv('HTTP_CLIENT_IP'); } else { $sp00e332 = getenv('REMOTE_ADDR'); } } } if (strpos($sp00e332, ',') !== FALSE) { $sp29dcb5 = explode(',', $sp00e332); return $sp29dcb5[0]; } return $sp00e332; } public static function getClientIP() { if (isset($_SERVER)) { $sp00e332 = $_SERVER['REMOTE_ADDR']; } else { $sp00e332 = getenv('REMOTE_ADDR'); } if (strpos($sp00e332, ',') !== FALSE) { $sp29dcb5 = explode(',', $sp00e332); return $sp29dcb5[0]; } return $sp00e332; } public static function filterWords($spfcf742, $sp20eee6) { if (!$spfcf742) { return false; } if (!is_array($sp20eee6)) { $sp20eee6 = explode('|', $sp20eee6); } foreach ($sp20eee6 as $sp483434) { if ($sp483434 && strpos($spfcf742, $sp483434) !== FALSE) { return $sp483434; } } return false; } public static function is_idcard($sp407432) { if (strlen($sp407432) == 18) { return self::idcard_checksum18($sp407432); } elseif (strlen($sp407432) == 15) { $sp407432 = self::idcard_15to18($sp407432); return self::idcard_checksum18($sp407432); } else { return false; } } private static function idcard_verify_number($sp6838b0) { if (strlen($sp6838b0) != 17) { return false; } $sp011100 = array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); $spf77ca0 = array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'); $sp2d37d9 = 0; for ($sp836a84 = 0; $sp836a84 < strlen($sp6838b0); $sp836a84++) { $sp2d37d9 += substr($sp6838b0, $sp836a84, 1) * $sp011100[$sp836a84]; } $sp1a1eea = $sp2d37d9 % 11; $spa0bc2a = $spf77ca0[$sp1a1eea]; return $spa0bc2a; } private static function idcard_15to18($sp9d0d59) { if (strlen($sp9d0d59) != 15) { return false; } else { if (array_search(substr($sp9d0d59, 12, 3), array('996', '997', '998', '999')) !== false) { $sp9d0d59 = substr($sp9d0d59, 0, 6) . '18' . substr($sp9d0d59, 6, 9); } else { $sp9d0d59 = substr($sp9d0d59, 0, 6) . '19' . substr($sp9d0d59, 6, 9); } } $sp9d0d59 = $sp9d0d59 . self::idcard_verify_number($sp9d0d59); return $sp9d0d59; } private static function idcard_checksum18($sp9d0d59) { if (strlen($sp9d0d59) != 18) { return false; } $sp6838b0 = substr($sp9d0d59, 0, 17); if (self::idcard_verify_number($sp6838b0) != strtoupper(substr($sp9d0d59, 17, 1))) { return false; } else { return true; } } public static function strBetween($spfcf742, $sp2dee69, $spc9b8a8) { $spb61e63 = stripos($spfcf742, $sp2dee69); if ($spb61e63 === false) { return ''; } $spa28440 = stripos($spfcf742, $spc9b8a8, $spb61e63 + strlen($sp2dee69)); if ($spa28440 === false || $spb61e63 >= $spa28440) { return ''; } $spdb1861 = strlen($sp2dee69); $spec9b7c = substr($spfcf742, $spb61e63 + $spdb1861, $spa28440 - $spb61e63 - $spdb1861); return $spec9b7c; } public static function formatUrl($sp7a0d0d) { if (!starts_with($sp7a0d0d, 'http://') && !starts_with($sp7a0d0d, 'https://')) { $sp7a0d0d = 'http://' . $sp7a0d0d; } while (ends_with($sp7a0d0d, '/')) { $sp7a0d0d = substr($sp7a0d0d, 0, -1); } return $sp7a0d0d; } }